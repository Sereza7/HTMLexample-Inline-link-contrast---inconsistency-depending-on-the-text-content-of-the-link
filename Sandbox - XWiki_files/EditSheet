XWiki.locale=document.documentElement.getAttribute("lang")||"";require.config({config:{l10n:{url:(new XWiki.Document("Translator","CKEditor")).getURL("get","outputSyntax\x3dplain\x26language\x3d"+encodeURIComponent(XWiki.locale))}}});
define("xwiki-ckeditor",["jquery","ckeditor","xwiki-meta","xwiki-ckeditor-plugins","xwiki-events-bridge",(new XWiki.Document("Translations","CKEditor")).getURL("jsx","language\x3d"+encodeURIComponent(XWiki.locale))],function(d,c,q){var n=function(a,b){return a.getURL("get",d.param({sheet:"CKEditor.FileUploader",outputSyntax:"plain",syntax:a.syntax,language:XWiki.locale,form_token:q.form_token,initiator:b}))},h=function(a){var b=d(a).attr("data-syntax"),e=XWiki.currentDocument;e.syntax=XWiki.docsyntax;
var g=XWiki.Model.resolve(d(a).attr("data-sourceDocumentReference"),XWiki.EntityType.DOCUMENT,XWiki.currentDocument.documentReference);XWiki.currentDocument.documentReference.equals(g)||(e=new XWiki.Document(g),e.syntax=b);g=a.hasAttribute("data-upload-disabled");return{filebrowserUploadUrl:g?"":n(e,"filebrowser"),height:d(a).height(),sourceDocument:e,sourceSyntax:b,uploadUrl:g?"":n(e,"filetools"),"xwiki-link":{labelGenerator:e.getURL("get",d.param({sheet:"CKEditor.LinkLabelGenerator",outputSyntax:"plain",
language:XWiki.locale}))}}},m=c.replace;c.replace=function(a,b){return m.call(this,a,c.tools.extend(h(a),b,!0))};var f=c.inline;c.inline=function(a,b){return f.call(this,a,c.tools.extend(h(a),b,!0))};c.tools.extend=function(a){var b=arguments.length,e;if("boolean"===typeof(e=arguments[b-1]))b--;else if("boolean"===typeof(e=arguments[b-2])){var g=arguments[b-1];b-=2}for(var k=1;k<b;k++){var p=arguments[k]||{};c.tools.array.forEach(c.tools.object.keys(p),function(l){if(!0===e||null==a[l])if(!g||l in
g){var t=a[l],r=p[l];d.isPlainObject(t)&&!0===t.__namespace&&d.isPlainObject(r)&&(r=c.tools.extend({},t,r,!0));a[l]=r}})}return a};c.on("instanceReady",({editor:a})=>{if(a.document.$!==document){const b=a.document.$.head,e=b.appendChild;b.appendChild=function(){const k=a.document.$.head;if(k!==b)return k.appendChild.apply(k,arguments);e.apply(b,arguments)};const g=b.insertBefore;b.insertBefore=function(k,p){const l=a.document.$.head;return l!==b?p.parentNode===l?l.insertBefore(k,p):l.appendChild.apply(k):
g.apply(b,arguments)}}});return d.Deferred().resolve(c).promise()});
require(["jquery","xwiki-ckeditor","xwiki-events-bridge"],function(d,c){if(!c.__editSheetLoaded){c.__editSheetLoaded=!0;var q=function(h,m){m.find(".ckeditor-textarea").each(function(){try{n(h,this)}catch(f){console.log(f)}})},n=function(h,m,f){var a=d.Deferred();f=h.replace(m,f);f.once("instanceReady",a.resolve.bind(a,f));f.once("reload",function(b){b.data.promise=b.data.promise.then(n.bind(null,h,m))});return a.promise()};c.done(function(h){q(h,d(body));d(document).off("xwiki:dom:updated.ckeditor").on("xwiki:dom:updated.ckeditor",
function(m,f){q(h,d(f.elements))})})}});