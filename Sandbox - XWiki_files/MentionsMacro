require.config({paths:{"xwiki-suggestUsers":"/xwiki/resources/uicomponents/suggest/suggestUsersAndGroups.min.js?cache-version\x3d1704187598000"}});
require(["deferred!ckeditor","xwiki-suggestUsers","jquery","xwiki-meta"],function(m,n,r,t){const p=function(e,g){n.loadUsers("GLOBAL_ONLY",{input:e,limit:6}).then(d=>{d=d.map(function(a){a.id=a.value;a.icon.cssClass?(a.imgClass="hidden",a.cssClass=a.icon.cssClass):(a.imgUrl=a.icon.url,a.cssClass="hidden",a.imgClass="");a.iconHtml;return a});g(d)})};m.then(e=>{function g(c){return{feed:function(b,f){p(b.query,f)},marker:"@",minChars:0,itemsLimit:6,itemTemplate:'\x3cli data-id\x3d"{id}" class\x3d"ckeditor-autocomplete-item"\x3e\n            \x3cdiv\x3e\n              \x3cspan class\x3d"ckeditor-autocomplete-item-icon-wrapper"\x3e\n                \x3cspan class\x3d"{cssClass}"\x3e\x3c/span\x3e\n                \x3cimg src\x3d"{imgUrl}" class\x3d"{imgClass}"/\x3e\n              \x3c/span\x3e\n              \x3cspan class\x3d"ckeditor-autocomplete-item-label"\x3e{label}\x3c/span\x3e\n            \x3c/div\x3e\n          \x3c/li\x3e',
outputTemplate:function(b){c.once("afterInsertHtml",function(){var f=c.execCommand,h=b.id;const q=b.id.replace(/[.:]/g,"-");var k=46656*Math.random()|0,l=46656*Math.random()|0;k=("000"+k.toString(36)).slice(-3);l=("000"+l.toString(36)).slice(-3);f.call(c,"xwiki-macro-insert",{name:"mention",inline:"enforce",parameters:{reference:h,style:"FULL_NAME",anchor:q+"-"+(k+l)}})});return""}}}function d(c){return a(c).then(b=>{b.plugins.mentions&&b.plugins.mentions.instances.push(new e.plugins.mentions(b,g(b)));
return b})}function a(c){return new Promise((b,f)=>{if("ready"===c.status)b(c);else c.once("instanceReady",h=>{b(h.editor)})})}Object.values(e.instances).forEach(d);e.on("instanceCreated",c=>{d(c.editor)})})});