define("xwiki-ckeditor-inline",["jquery","xwiki-ckeditor"],function(e,m){[(new XWiki.Document("EditSheet","CKEditor")).getURL("ssx"),(new XWiki.Document("ContentSheet","CKEditor")).getURL("ssx"),"/xwiki/webjars/wiki%3Axwiki/xwiki-platform-ckeditor-plugins/16.0.0-SNAPSHOT/webjar.bundle.min.css?evaluate\x3dtrue","/xwiki/webjars/wiki%3Axwiki/xwiki-platform-tree-webjar/16.0.0-SNAPSHOT/tree.min.css?evaluate\x3dtrue","/xwiki/webjars/wiki%3Axwiki/xwiki-platform-tree-webjar/16.0.0-SNAPSHOT/finder.min.css?evaluate\x3dtrue"].forEach(function(f){e("\x3clink\x3e").attr({type:"text/css",
rel:"stylesheet",href:f}).appendTo("head")});e(document).on("xwiki:actions:edit",function(f,d){if(d&&"org.xwiki.rendering.syntax.SyntaxContent"===d.contentType&&"wysiwyg"===d.editMode){var a=e(f.target);m.done(function(c){n(c,a,d)})}});var p=function(f){function d(){var h=a.getBoundingClientRect(),b=c.getBoundingClientRect();b=h.top+h.height>b.top;c.classList.contains("sticky-buttons-fixed")?(c.style.paddingTop&&(c.style.paddingTop=""),b&&(a.style.position="fixed",a.style.top="0px")):b?c.style.paddingTop||
(c.style.paddingTop=parseInt(getComputedStyle(c).getPropertyValue("padding-top"))+h.height+"px"):c.style.paddingTop&&(c.style.paddingTop="")}var a=document.getElementById("cke_"+f.name),c=document.getElementsByClassName("inplace-editing-buttons")[0];if(a&&c){window.addEventListener("scroll",d);var g=new MutationObserver(d);g.observe(a,{attributes:!0,attributeFilter:["style"]});return function(){window.removeEventListener("scroll",d);g.disconnect()}}return null},n=function(f,d,a){d.attr({"data-sourceDocumentReference":XWiki.Model.serialize(a.document.documentReference),
"data-syntax":a.document.syntax}).each(function(){try{l(f,this,a).done(a.deferred.resolve.bind(a.deferred,a.document))}catch(c){console.log(c),new XWiki.widgets.Notification("Failed to initialize CKEditor.","error"),a.deferred.reject()}})},l=function(f,d,a,c){var g=null,h=e.Deferred(),b=f.inline(d,e.extend({resize_enabled:!1},c));if(!a.enableSourceMode)b.once("configLoaded",function(k){"string"===typeof b.config.removePlugins&&(b.config.removePlugins+=",xwiki-source,xwiki-sourcearea")});b.once("instanceReady",
function(){h.resolve(b);b.setReadOnly(!1);g=p(b)});b.once("reload",function(k){e(document).off("xwiki:actions:view.contentEditor xwiki:actions:beforeSave.contentEditor");k.data.promise=k.data.promise.then(l.bind(null,f,d,a))});e(document).on("xwiki:actions:beforeSave.contentEditor",function(k){a.document["source"===b.mode?"content":"renderedContent"]=b.getData();a.document.syntax=b.config.sourceSyntax});e(document).one("xwiki:actions:view.contentEditor",function(k,q){e(document).off("xwiki:actions:beforeSave.contentEditor");
e(d).blur().prop("contenteditable",!1).removeAttr("contenteditable");setTimeout(function(){b.destroy(!0);g&&(g(),g=null)},0)});return h.promise()}});