define("xwiki-like-messages",{prefix:"like.button.title.",keys:["unlike","like"]});
require(["jquery","xwiki-meta","xwiki-l10n!xwiki-like-messages"],function(b,d,e){var g=XWiki.Model.resolve("XWiki.Like.LikeUIX",XWiki.EntityType.DOCUMENT),f=(new XWiki.Document(g)).getURL("get"),h=function(){var a=b(".like-button").first();b.post(f,{xaction:"like",form_token:d.form_token,document:XWiki.Model.serialize(d.documentReference)}).then(c=>{a.removeClass("btn-primary");a.addClass("btn-default");a.find(".like-number").text(c.counter);a.attr("title",e.get("unlike",c.counter));b("#is-liked").val("true");
new XWiki.widgets.Notification("The page has been liked.","done")}).catch(()=>{new XWiki.widgets.Notification("Error when trying to like the page.","error")})},k=function(){var a=b(".like-button").first();b.post(f,{xaction:"unlike",form_token:d.form_token,document:XWiki.Model.serialize(d.documentReference)}).then(c=>{a.removeClass("btn-default");a.addClass("btn-primary");a.find(".like-number").text(c.counter);a.attr("title",e.get("like",c.counter));b("#is-liked").val("false");new XWiki.widgets.Notification("The page has been unliked.",
"done")}).catch(()=>{new XWiki.widgets.Notification("Error when trying to unlike the page.","error")})};b(".like-button").on("click",function(){"true"!=b("#is-liked").val()?h():k()})});